syntax = "proto3";

import "server.proto";
import "lobby_player.proto";

option csharp_namespace = "Tempest.Protocol";

service LobbyHostService {
  rpc CreateLobby(stream LobbyRequest) returns (stream LobbyUpdate);
}

message LobbyRequest {
  uint64 message_id = 1;
  oneof message {
      InitLobbyRequest init = 2;
  }
}

message InitLobbyRequest {
  string private_id = 1;
  Server server = 2;
}

message LobbyUpdate {
  uint64 message_id = 1;
  oneof message {
    InitLobbyUpdate init = 2;
    LobbyPlayer player_join = 3;
    uint64 player_leave = 4;
  }
}

message InitLobbyUpdate {
  uint64 id = 1;
}